# –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ

## üéØ –ß—Ç–æ –≤–∫–ª—é—á–µ–Ω–æ

- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏** - –ø—Ä–æ—Å–º–æ—Ç—Ä, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏** - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ
- ‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** - API –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–æ–≤
- ‚úÖ **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** - –ø—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤—Ö–æ–¥–∞
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ –∏ —Ç–æ–≤–∞—Ä–æ–≤

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

```bash
npm run prisma:migrate
npm run prisma:generate
```

### 2. –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞

```bash
# –° –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (admin / admin123)
npm run admin:create

# –ò–ª–∏ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏
npm run admin:create myusername mypassword
```

### 3. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç

```bash
npm run build
pm2 restart ecocraft
```

## üîê –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω–∫—É

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞: **https://snovaniel.ru/admin/login**

–î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
- **–õ–æ–≥–∏–Ω**: `admin`
- **–ü–∞—Ä–æ–ª—å**: `admin123`

‚ö†Ô∏è **–í–ê–ñ–ù–û**: –°—Ä–∞–∑—É –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞ —Å–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å!

## üì± –†–∞–∑–¥–µ–ª—ã –∞–¥–º–∏–Ω–∫–∏

### 1. –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `/admin` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã

### 2. –ó–∞–∫–∞–∑—ã
- `/admin/orders` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π –∑–∞–∫–∞–∑–∞
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ (–ù–æ–≤—ã–π ‚Üí –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω ‚Üí –í –æ–±—Ä–∞–±–æ—Ç–∫–µ ‚Üí –û—Ç–ø—Ä–∞–≤–ª–µ–Ω ‚Üí –î–æ—Å—Ç–∞–≤–ª–µ–Ω)

### 3. –¢–æ–≤–∞—Ä—ã
- `/admin/products` - —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
- `/admin/products/new` - –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
- `/admin/products/[id]/edit` - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä

## üì∏ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞
–í—Å—Ç–∞–≤—å—Ç–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø–æ–ª–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä `/images/product-1.jpg`)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ImageUpload` (–±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ñ–æ—Ä–º—É)
2. –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `/public/images/products/`
3. URL –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—Ç–∞–≤–∏—Ç—Å—è –≤ —Ñ–æ—Ä–º—É

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/app/admin/
‚îú‚îÄ‚îÄ layout.tsx              # –û–±—â–∏–π layout —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
‚îú‚îÄ‚îÄ page.tsx               # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–¥–º–∏–Ω–∫–∏
‚îú‚îÄ‚îÄ login/
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx          # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ LoginForm.tsx     # –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ actions.ts        # Server Actions –¥–ª—è –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ orders/
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx          # –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ OrderStatusBadge.tsx
‚îÇ   ‚îú‚îÄ‚îÄ UpdateStatusForm.tsx
‚îÇ   ‚îî‚îÄ‚îÄ actions.ts
‚îî‚îÄ‚îÄ products/
    ‚îú‚îÄ‚îÄ page.tsx          # –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
    ‚îú‚îÄ‚îÄ ProductForm.tsx   # –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ —Ç–æ–≤–∞—Ä–∞
    ‚îú‚îÄ‚îÄ ImageUpload.tsx   # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
    ‚îú‚îÄ‚îÄ actions.ts        # CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
    ‚îú‚îÄ‚îÄ new/
    ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx     # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
    ‚îî‚îÄ‚îÄ [id]/
        ‚îî‚îÄ‚îÄ edit/
            ‚îî‚îÄ‚îÄ page.tsx # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- –ü–∞—Ä–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ
- –ü—Ä–æ—Å—Ç—ã–µ cookie-—Å–µ—Å—Å–∏–∏

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
1. **bcrypt** –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π:
```bash
npm install bcrypt
npm install -D @types/bcrypt
```

2. –û–±–Ω–æ–≤–∏—Ç—å `src/app/admin/login/actions.ts`:
```typescript
import bcrypt from 'bcrypt'

// –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∞–¥–º–∏–Ω–∞
const hashedPassword = await bcrypt.hash(password, 10)

// –ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ
const isValid = await bcrypt.compare(password, admin.password)
```

3. **JWT —Ç–æ–∫–µ–Ω—ã** –≤–º–µ—Å—Ç–æ –ø—Ä–æ—Å—Ç—ã—Ö cookies
4. **Rate limiting** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞
5. **HTTPS** (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

**Order** - –∑–∞–∫–∞–∑—ã
- id, orderNumber (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä)
- name, phone, email, address
- delivery, comment
- total (—Å—É–º–º–∞ –≤ –∫–æ–ø–µ–π–∫–∞—Ö)
- status (NEW, CONFIRMED, PROCESSING, SHIPPED, DELIVERED, CANCELLED)
- createdAt, updatedAt

**OrderItem** - –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫–∞–∑–∞
- id, orderId
- product (–Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞)
- size (—Ä–∞–∑–º–µ—Ä)
- qty (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ)
- price (—Ü–µ–Ω–∞ –≤ –∫–æ–ø–µ–π–∫–∞—Ö)

**Admin** - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
- id, username, password
- createdAt

## üöÄ –ß–∞—Å—Ç—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∞
npm run admin:create admin mypassword123

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
npm run prisma:migrate

# –û—Ç–∫—Ä—ã—Ç—å Prisma Studio (–ø—Ä–æ—Å–º–æ—Ç—Ä –ë–î)
npm run prisma:studio

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
npm run build && pm2 restart ecocraft

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
pm2 logs ecocraft
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ –º–æ–≥—É –≤–æ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É"
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∞–¥–º–∏–Ω —Å–æ–∑–¥–∞–Ω: `npm run prisma:studio`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `pm2 logs ecocraft`
3. –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –∞–¥–º–∏–Ω–∞: `npm run admin:create admin newpass`

### –ü—Ä–æ–±–ª–µ–º–∞: "–¢–æ–≤–∞—Ä—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è"
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î –≤ `.env`
2. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏: `npm run prisma:migrate`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

### –ü—Ä–æ–±–ª–µ–º–∞: "–ö–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è"
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ `/public/images/products/`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `next.config.mjs` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `unoptimized: true`
3. –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤—Ä—É—á–Ω—É—é: `mkdir -p public/images/products`

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –õ–æ–≥–∏ PM2: `pm2 logs ecocraft`
2. –õ–æ–≥–∏ Nginx: `tail -f /var/log/nginx/error.log`
3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `npm run prisma:studio`

